namespace = qingqiu_flood

qingqiu_flood.1 = { #Initial response to the flood
	type = country_event
	placement = ROOT
	
	title = qingqiu_flood.1.t
	desc = qingqiu_flood.1.d
	flavor = qingqiu_flood.1.f
	
	event_image = {
		video = "gfx/event_pictures/unspecific_devastation.bk2"
	}
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
	option = { #Save the farmers
		if = {
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys
				}
			}
			c:QIN = {
				trigger_event = { id = qingqiu_flood.2 days = 20 }
			}
		}
		if = {
			limit = {
				c:QIN = {
					NOR = {
						has_modifier = qin_federal_sys
						has_modifier = qin_federal_sys_better
					}
				}
			}
			c:QIN = {
				trigger_event = { id = qingqiu_flood.3 days = 20 }
			}
		}
		if = {
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys_better
				}
			}
			c:QIN = {
				trigger_event = { id = qingqiu_flood.4 days = 20 }
			}
		}
	name = qingqiu_flood.1.a
		if = { #NOT REFORMED
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys
				}
			}
		change_variable = {
			name = qin_flood_value
			add = 3
			}
		}
		if = { #REFORMED
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys_better
				}
			}
		change_variable = {
			name = qin_flood_value
			add = 2
			}
		}
		if = { #UNITARY
			limit = {
				c:QIN = {
					NOR = {
						has_modifier = qin_federal_sys
						has_modifier = qin_federal_sys_better
					}
				}
			}
		change_variable = {
			name = qin_flood_value
			add = 1
			}
		}
	}
	option = { #Evacuate the cities
		if = {
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys
				}
			}
			c:QIN = {
				trigger_event = { id = qingqiu_flood.2 days = 20 }
			}
		}
		if = {
			limit = {
				c:QIN = {
					NOR = {
						has_modifier = qin_federal_sys
						has_modifier = qin_federal_sys_better
					}
				}
			}
			c:QIN = {
				trigger_event = { id = qingqiu_flood.3 days = 20 }
			}
		}
		if = {
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys_better
				}
			}
			c:QIN = {
				trigger_event = { id = qingqiu_flood.4 days = 20 }
			}
		}
	name = qingqiu_flood.1.b
		if = { #NOT REFORMED
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys
				}
			}
		change_variable = {
			name = qin_flood_value
			add = 2
			}
		}
		if = { #REFORMED
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys_better
				}
			}
		change_variable = {
			name = qin_flood_value
			add = 1
			}
		}
		if = { #UNITARY
			limit = {
				c:QIN = {
					NOR = {
						has_modifier = qin_federal_sys
						has_modifier = qin_federal_sys_better
					}
				}
			}
		change_variable = {
			name = qin_flood_value
			add = 0
			}
		}
	}
	option = { #Re-establish supply routes
		if = {
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys
				}
			}
				trigger_event = { id = qingqiu_flood.2 days = 20 }
			}
		if = {
			limit = {
				c:QIN = {
					NOR = {
						has_modifier = qin_federal_sys
						has_modifier = qin_federal_sys_better
					}
				}
			}
			c:QIN = {
				trigger_event = { id = qingqiu_flood.3 days = 20 }
			}
		}
		if = {
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys_better
				}
			}
			c:QIN = {
				trigger_event = { id = qingqiu_flood.4 days = 20 }
			}
		}
	name = qingqiu_flood.1.c
		if = { #NOT REFORMED
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys
				}
			}
		change_variable = {
			name = qin_flood_value
			add = 4
			}
		}
		if = { #REFORMED
			limit = {
				c:QIN = {
					has_modifier = qin_federal_sys_better
				}
			}
		change_variable = {
			name = qin_flood_value
			add = 3
			}
		}
		if = { #UNITARY
			limit = {
				c:QIN = {
					NOR = {
						has_modifier = qin_federal_sys
						has_modifier = qin_federal_sys_better
					}
				}
			}
		change_variable = {
			name = qin_flood_value
			add = 2
			}
		}
	}
}

qingqiu_flood.2 = { #Dealing with the rest of the country UNREFORMED
	type = country_event
	placement = ROOT
	title = qingqiu_flood.2.t
	desc = qingqiu_flood.2.d
	flavor = qingqiu_flood.2.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
	trigger = {
		has_modifier = qin_in_brap
	}
	
	option = { #Impose new taxes to raise funds for the recovery
		name = qingqiu_flood.2.a
		trigger_event = { id = qingqiu_flood.5 days = 20 }
		change_variable = {
            name = qin_flood_value
            add = 4
		}
		add_modifier = {
			name = qin_new_taxes
			months = 11
		}
	}
	option = { #Grant further autonomy to the provinces
		name = qingqiu_flood.2.b
		trigger_event = { id = qingqiu_flood.5 days = 20 }
		change_variable = {
            name = qin_flood_value
            add = 3
		}
		add_modifier = {
			name = qin_less_auth
			months = 11
		}
	}
	option = { #Ignore the other provinces until we recover
		name = qingqiu_flood.2.c
		trigger_event = { id = qingqiu_flood.5 days = 20 }
		change_variable = {
            name = qin_flood_value
            add = 5
		}
	}
}

qingqiu_flood.3 = { #Dealing with the rest of the country UNITARY
	type = country_event
	placement = ROOT
	title = qingqiu_flood.3.t
	desc = qingqiu_flood.3.d
	flavor = qingqiu_flood.3.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1

	option = { #Establish a disaster response ministry to focus on this now
	name = qingqiu_flood.3.a
		trigger_event = { id = qingqiu_flood.5 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = -1
		}
	add_modifier = {
		name = qin_disaster_response_ministry
		}
		set_global_variable = {
			name = qin_disaster_response
		}
	}
	option = { #Impose new taxes to raise more funds
	name = qingqiu_flood.3.b
		trigger_event = { id = qingqiu_flood.5 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 0
		}
	add_modifier = {
		name = qin_stolen_assets
		months = 21
		}
	}
	option = { #We will endure
	name = qingqiu_flood.3.c
		trigger_event = { id = qingqiu_flood.5 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 1
		}		
	}

}

qingqiu_flood.4 = { #Dealing with the rest of the country FEDERAL
	type = country_event
	placement = ROOT
	title = qingqiu_flood.4.t
	desc = qingqiu_flood.4.d
	flavor = qingqiu_flood.4.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	event_image = {
		video = "gfx/event_pictures/unspecific_devastation.bk2"
	}
	
	duration = 1

	option = { #Temporarily delegate more powers to the provinces
		trigger_event = { id = qingqiu_flood.5 days = 20 }
		name = qingqiu_flood.4.a
	change_variable = {
        name = qin_flood_value
        add = -1
		}
		add_modifier = {
			name = qin_less_auth
			months = 11
		}
	}

	option = { #Xiazhou will serve as the new seat of government
		trigger_event = { id = qingqiu_flood.5 days = 20 }
		name = qingqiu_flood.4.b
	change_variable = {
        name = qin_flood_value
        add = 0
		}
	set_capital = STATE_XIAZHOU
	add_modifier = {
		name = moved_capital_recently
		months = 21
		is_decaying	= yes
		}
	}

	option = { #The federation will endure
		trigger_event = { id = qingqiu_flood.5 days = 20 }
		name = qingqiu_flood.4.c
	change_variable = {
        name = qin_flood_value
        add = 2
		}	
	}

}

qingqiu_flood.5 = { #Break the levees?
	type = country_event
	placement = ROOT
	title = qingqiu_flood.5.t
	desc = qingqiu_flood.5.d
	flavor = qingqiu_flood.5.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
	option = { #Break the levees
		trigger_event = { id = qingqiu_flood.8 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 1
		}
	}
	option = { #Don't do anything
		trigger_event = { id = qingqiu_flood.8 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 3
		}		
	}
	option = { #Dig temporary canals
		trigger_event = { id = qingqiu_flood.8 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 2
		}
	}
}

qingqiu_flood.6 = { #Send some sort of force to help rebuild
	type = country_event
	placement = ROOT
	title = qingqiu_flood.6.t
	desc = qingqiu_flood.6.d
	flavor = qingqiu_flood.6.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
	option = { #Send in prisoners
		trigger_event = { id = qingqiu_flood.7 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 1
		}
	}
	option = { #Send in farmers
		trigger_event = { id = qingqiu_flood.7 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 3
		}
	s:STATE_QINGQIU.region_state:QIN = {
		add_radicals = {
			pop_type = farmers
			value = 0.8
			}
		}
	s:STATE_SHANGU_SIWANG.region_state:QIN = {
		add_radicals = {
			pop_type = farmers
			value = 0.8
			}
		}
		add_modifier = {
		name = qin_farmers_dieing
		months = 11
		}
	}
	option = { #Send in the army
		trigger_event = { id = qingqiu_flood.7 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 2
		add_modifier = {
			name = qin_saviours
			is_decaying = yes
			months = 31
			}
		}	
	}
}

qingqiu_flood.7 = { #What to do about shantytowns
	type = country_event
	placement = ROOT
	title = qingqiu_flood.7.t
	desc = qingqiu_flood.7.d
	flavor = qingqiu_flood.7.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
	option = { #Build new towns for them
		trigger_event = { id = qingqiu_flood.9 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 1
		}		
	}
	option = { #Relocate them outside the cities
		trigger_event = { id = qingqiu_flood.9 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 2
		}		
	}
	option = { #Leave them to their fate
		trigger_event = { id = qingqiu_flood.9 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 3
		}		
	}
	
}

qingqiu_flood.8 = { #Christians offer aid
	type = country_event
	placement = ROOT
	title = qingqiu_flood.8.t
	desc = qingqiu_flood.8.d
	flavor = qingqiu_flood.8.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"

	duration = 1
	
	option = { #Accept aid
		trigger_event = { id = qingqiu_flood.6 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = -2
		}
	}
	option = { #Don't accept aid
		trigger_event = { id = qingqiu_flood.6 days = 20 }
	}
}

qingqiu_flood.9 = { #Contact Gran Colombia - spread christianity a lil too
	type = country_event
	placement = ROOT
	title = qingqiu_flood.9.t
	desc = qingqiu_flood.9.d
	flavor = qingqiu_flood.9.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
	option = { #Yes, ask for help
		c:GCO = {
			trigger_event = { id = qingqiu_flood.10 days = 20 }	
		}
	}
	option = { #Nah we're fine without them
		trigger_event = { id = qingqiu_flood.14 days = 20 }
	}
}

qingqiu_flood.10 = { #Event for GC, if they exist
	type = country_event
	placement = ROOT
	title = qingqiu_flood.10.t
	desc = qingqiu_flood.10.d
	flavor = qingqiu_flood.10.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1

	option = { #Positive response
		c:QIN = {
			trigger_event = { id = qingqiu_flood.11 days = 20 }
		}
	}
	option = { #Negative response
		c:QIN = {
			trigger_event = { id = qingqiu_flood.12 days = 20 }
		}
	}
}

qingqiu_flood.11 = { #Positive response from GC
	type = country_event
	placement = ROOT
	title = qingqiu_flood.11.t
	desc = qingqiu_flood.11.d
	flavor = qingqiu_flood.11.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
	option = {
		if = {
			has_global_variable = qin_flood_active = {
		trigger_event = { id = qingqiu_flood.14 days = 20 }
		}
	}
	change_variable = {
        name = qin_flood_value
        add = -3
		}
	}
}

qingqiu_flood.12 = { #Negative response from GC
	type = country_event
	placement = ROOT
	title = qingqiu_flood.12.t
	desc = qingqiu_flood.12.d
	flavor = qingqiu_flood.12.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1

	option = {
		trigger_event = { id = qingqiu_flood.14 days = 20 }	
	}
}

qingqiu_flood.13 = { #Event for when GC doesn't exist - charity from an industrialist
	type = country_event
	placement = ROOT
	title = qingqiu_flood.13.t
	desc = qingqiu_flood.13.d
	flavor = qingqiu_flood.13.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1

	option = { #Flat -1 for the JE, that way you're not getting screwed over by RNG
		trigger_event = { id = qingqiu_flood.14 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = -1
		}
	}
}

qingqiu_flood.14 = { #Bringing in fresh water
	type = country_event
	placement = ROOT
	title = qingqiu_flood.14.t
	desc = qingqiu_flood.14.d
	flavor = qingqiu_flood.14.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
	option = { #Build acqueducts
		trigger_event = { id = qingqiu_flood.15 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 1
		}	
	}
	option = { #Extract it from the rivers
		trigger_event = { id = qingqiu_flood.15 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 2
		}	
	}	
	option = { #Tell people to boil sea water
		trigger_event = { id = qingqiu_flood.15 days = 20 }
	change_variable = {
        name = qin_flood_value
        add = 3
		}		
	}	
	
}

qingqiu_flood.15 = { #Long-term rebuilding 
	type = country_event
	placement = ROOT
	title = qingqiu_flood.15.t
	desc = qingqiu_flood.15.d
	flavor = qingqiu_flood.15.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
	option = { #Pay lots now, short length of debuff
	custom_tooltip = {
		text = qingqiu_flood.15.tt
		}
		trigger_event = { id = qingqiu_flood.18 days = 20 }
	}
	option = { #The middle option
	custom_tooltip = {
		text = qingqiu_flood.15.tt
		}
		trigger_event = { id = qingqiu_flood.18 days = 20 }
	}
	option = { #Pay a little now, long effect of debuff
	custom_tooltip = {
		text = qingqiu_flood.15.tt
		}
		trigger_event = { id = qingqiu_flood.18 days = 20 }
	}
}

qingqiu_flood.16 = { #No reply from Sanbao UNITARY
	type = country_event
	placement = ROOT
	title = qingqiu_flood.16.t
	desc = qingqiu_flood.16.d
	flavor = qingqiu_flood.16.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
}

qingqiu_flood.17 = { #No reply from Sanbao FEDERAL/UNREFORMED
	type = country_event
	placement = ROOT
	title = qingqiu_flood.17.t
	desc = qingqiu_flood.17.d
	flavor = qingqiu_flood.17.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
}

qingqiu_flood.18 = { #Sucess!
	type = country_event
	placement = ROOT
	title = qingqiu_flood.18.t
	desc = qingqiu_flood.18.d
	flavor = qingqiu_flood.18.f
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"
	
	duration = 1
	
	immediate = {
		remove_global_variable = qin_flood_active
		remove_modifier = qin_in_brap
	}
	
	option = {
	}
	
}