je_qingqiu_reform_into_cooler_federation = {

	invalid = {
		NOT = {
			has_modifier = qin_federal_sys
		}
	}

	complete = {
		has_technology_researched = nationalism
		has_law = law_type:law_elected_bureaucrats
	OR = {
		has_law = law_type:law_wealth_voting
		has_law = law_type:law_census_voting
		}
	NOT = {
		has_law = law_type:law_national_militia
		has_law = law_type:law_outlawed_dissent
		has_law = law_type:law_monarchy
		has_modifier = qin_in_brap
		}
	}
	
	on_complete = {
		trigger_event = { id = qingqiu_federation.3 }
	}
}

je_qingqiu_reform_into_unitary_state = {

	invalid = {
		NOT = {
			has_modifier = qin_federal_sys
		}
	}
	complete = {
	OR = {
		has_law = law_type:law_monarchy
		has_law = law_type:law_presidential_republic
		has_law = law_type:law_theocracy
	}
	has_law = law_type:law_professional_army
	has_law = law_type:law_per_capita_based_taxation
	has_law = law_type:law_national_guard
	has_technology_researched = central_banking
	has_technology_researched = central_archives
	NOT = {
		has_modifier = qin_in_brap
		}
	}
	
	on_complete = {
		trigger_event = { id = qingqiu_federation.4 }
	}
}

je_qingqiu_flood = { 

#Flood sequence, note that the fail and success conditions are swapped because of how JEs work
#if it was the other way around you'dn't've to go through the entire chain, there's probably a way around this but I can't be bothered lmoa
#Might change this later if it's confusing

#This JE is triggered by the first event in the flood sequence

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	fail = {
		NOT = {
			has_global_variable = qin_flood_active
		}
	}
	
	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}
	
	on_complete = {
		if = {
			limit = {
				c:QIN = {
					OR = {
						has_modifier = qin_federal_sys
						has_modifier = qin_federal_sys_better
					}
				}
			}			
		trigger_event = { id = qingqiu_flood.17 }
		}
		if = {
			limit = {
				c:QIN = {
					NOR = {
						has_modifier = qin_federal_sys
						has_modifier = qin_federal_sys_better
					}
				}
			}		
		trigger_event = { id = qingqiu_flood.16 }
		}
		remove_global_variable = qin_flood_active
	}
	
	should_be_pinned_by_default = yes
	
	progressbar = yes
	
	goal_add_value = {
		add = 17
	}
	
	current_value = {
		value = var:qin_flood_value
	}
}

je_qingqiu_yicheng_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_global_variable = trans_dayan_railway_done }
		OR = {
			any_scope_state = {
				state_region = s:STATE_YICHENG
				percent > 0.2
				owner = ROOT
			}
			any_scope_state = {
				state_region = s:STATE_DAYAN
			}
			any_scope_state = {
				state_region = s:STATE_QINGQIU
			}
		}
	}
	
	possible = {
		has_technology_researched = railways
		any_scope_state = {
			state_region = s:STATE_YICHENG
		}
		any_scope_state = {
			state_region = s:STATE_DAYAN
		}
		any_scope_state = {
			state_region = s:STATE_QINGQIU
		}
	}
	
	complete = {
		any_scope_state = {
			state_region = s:STATE_YICHENG
			has_building = building_railway
			has_building = building_government_administration
		}
		any_scope_state = {
			state_region = s:STATE_DAYAN
			has_building = building_railway
			has_building = building_government_administration
		}
		any_scope_state = {
			state_region = s:STATE_QINGQIU
			has_building = building_railway
		}	
	}
	
	on_complete = {
		set_global_variable = trans_dayan_railway_done
		trigger_event = { id = qingqiu_yicheng_railway.1 }
	}
}